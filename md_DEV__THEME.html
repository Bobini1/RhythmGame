<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RhythmGame: Theme Development</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RhythmGame<span id="projectnumber">&#160;0.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Theme Development</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md24"></a> If you want to edit a theme, you only need a text editor. Edit the scripts and relaunch the game to see your changes.</p>
<p>All errors are printed to log.txt in the assets folder. On platforms other than Windows, the log is printed to the console as well. You can also press F10 in-game to open the log overlay.</p>
<h1><a class="anchor" id="autotoc_md25"></a>
Theme structure</h1>
<p>A theme is a folder in <code>assets/themes/</code> that contains a <code>theme.json</code> file. That file needs to have a <code>scripts</code> field with an object containing relative paths to QML files for each game screen implemented by the theme.</p>
<p>Here is an example of a minimal <code>theme.json</code> file:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;scripts&quot;: {</div>
<div class="line">        &quot;result&quot;: &quot;result.qml&quot;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>A theme does not need to implement all screens, it can just implement the ones you want. You can think of it as a package that can contain replacements for any number of the game's screens.</p>
<h3><a class="anchor" id="autotoc_md26"></a>
Persisent settings</h3>
<p>To provide configurable theme settings that will be stored separately for each user profile, you can define a <code>settings</code> field in <code>theme.json</code>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;scripts&quot;: {</div>
<div class="line">        &quot;result&quot;: &quot;result.qml&quot;</div>
<div class="line">    },</div>
<div class="line">    &quot;settings&quot;: {</div>
<div class="line">        &quot;result&quot;: &quot;result.json&quot;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>It serves two purposes</p><ul>
<li>Defines variables of the screen</li>
<li>Is used for generating a settings page in the settings screen</li>
</ul>
<p>For persistent global settings affecting all profiles, you can use the <a href="https://doc.qt.io/qt-6/qml-qt-labs-settings-settings.html">Settings QML type</a>. But you probably won't need it. I only ever used it once, for storing screen resolution.</p>
<p>There are 7 different types of properties you can use in a settings file:</p><ul>
<li>boolean</li>
<li>range</li>
<li>string</li>
<li>file</li>
<li>choice</li>
<li>color</li>
<li>hidden</li>
</ul>
<p>You can also put them in groups that have names and descriptions.</p>
<p>The usage of most property types is self-explanatory, simply take a look at the default theme to find out how to use them.</p>
<p>The special <code>hidden</code> type can be used to declare properties that will not be shown in the auto-generated settings page.</p>
<p>You can access the values assigned to properties via <code>profile.vars.themeVars[screen][themeName].varId</code>.</p>
<p>You can get the current theme's name with <code>QmlUtils.themeName</code>. As for <code>screen</code>, your theme should be able to figure it out on its own. It can be <code>"result"</code>, <code>"gameplay"</code>, etc.</p>
<p>Please don't access vars that don't belong to the current screen. It creates hidden dependencies on other themes or screens of your theme that might not be enabled.</p>
<p>If you need to pass a variable between screens, suggest adding it to profile.vars.generalVars in the engine.</p>
<h3><a class="anchor" id="autotoc_md27"></a>
Overriding the settings page for a screen</h3>
<p>You can override the auto-generated settings page for a screen by providing a QML file in a <code>settingsScripts</code> field in <code>theme.json</code>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;scripts&quot;: {</div>
<div class="line">        &quot;result&quot;: &quot;result.qml&quot;</div>
<div class="line">    },</div>
<div class="line">    &quot;settings&quot;: {</div>
<div class="line">        &quot;result&quot;: &quot;result.json&quot;</div>
<div class="line">    },</div>
<div class="line">    &quot;settingsScripts&quot;: {</div>
<div class="line">        &quot;result&quot;: &quot;resultSettings.qml&quot;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>The default theme does not use this feature.</p>
<h3><a class="anchor" id="autotoc_md28"></a>
Translations</h3>
<p>Translations are described in <a class="el" href="md_DEV__LANG.html">DEV_LANG.md</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;scripts&quot;: {</div>
<div class="line">        &quot;result&quot;: &quot;result.qml&quot;</div>
<div class="line">    },</div>
<div class="line">    &quot;settings&quot;: {</div>
<div class="line">        &quot;result&quot;: &quot;result.json&quot;</div>
<div class="line">    },</div>
<div class="line">    &quot;settingsScripts&quot;: {</div>
<div class="line">        &quot;result&quot;: &quot;resultSettings.qml&quot;</div>
<div class="line">    },</div>
<div class="line">    &quot;translations&quot;: {</div>
<div class="line">        &quot;en&quot;: &quot;en.qm&quot;,</div>
<div class="line">        &quot;pl&quot;: &quot;pl.qm&quot;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md29"></a>
Theme loading</h2>
<p>Themes are loaded and validated when the game starts. If there are any critical errors in configuration files, the game will fail to start. Don't share broken themes! Look at log.txt in the assets folder to find out what went wrong.</p>
<p>The part of the game that manages </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
