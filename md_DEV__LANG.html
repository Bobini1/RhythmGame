<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RhythmGame: Translating the game</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RhythmGame<span id="projectnumber">&#160;1.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Translating the game</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md39"></a> Translations are theme-specific. The C++ part of the game does not contain any translatable strings.</p>
<p>In a theme, translatable string come in two forms:</p><ul>
<li>Theme settings strings (used only in the settings screen)</li>
<li>Strings in QML files</li>
</ul>
<h1><a class="anchor" id="autotoc_md40"></a>
Theme settings strings</h1>
<p>Those are quite straightforward. If you take a look at <a href="https://github.com/Bobini1/RhythmGame/blob/master/data/themes/Default/settings/k7.json">the json file</a> defining the settings for the k7 screen, you will notice that the name and description of each setting are defined in the file itself. Simply add new languages next to "en" and "pl" (English and Polish).</p>
<p>The identifier of the language can be either a two-letter ISO 639-1 code (e.g. "fr" for French, "zh" for Chinese) or a combination of the ISO 639-1 code and the ISO 3166-1 alpha-2 country code (e.g. "fr_CA" for Canadian French, "zh_HK" for Traditional Chinese as used in Hong Kong).</p>
<hr  />
<p> <b>NOTE</b></p>
<p>Distinguishing between different scripts of the same langauge based on ISO 15924 identifiers is currently unsupported. Please use country codes instead if possible.</p>
<hr  />
<p>For example, here is a property with an added Canadian French translation:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;id&quot;: &quot;verticalGauge&quot;,</div>
<div class="line">  &quot;name&quot;: {</div>
<div class="line">    &quot;en&quot;: &quot;Vertical Gauge&quot;,</div>
<div class="line">    &quot;pl&quot;: &quot;Pionowy wskaźnik&quot;,</div>
<div class="line">    &quot;fr_CA&quot;: &quot;Jauge verticale&quot;</div>
<div class="line">  },</div>
<div class="line">  &quot;description&quot;: {</div>
<div class="line">    &quot;en&quot;: &quot;Whether the life gauge is vertical (fills upwards).&quot;,</div>
<div class="line">    &quot;pl&quot;: &quot;Pionowy wskaźnić życia (wypełnia się w górę).&quot;,</div>
<div class="line">    &quot;fr_CA&quot;: &quot;Si la jauge de vie est verticale (se remplit vers le haut).&quot;</div>
<div class="line">  },</div>
<div class="line">  &quot;type&quot;: &quot;boolean&quot;,</div>
<div class="line">  &quot;default&quot;: false</div>
<div class="line">}</div>
</div><!-- fragment --><p>To make a language selectable in the game, the theme's <code>theme.json</code> file needs to declare it. This can look like this:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;translations&quot;: {</div>
<div class="line">    &quot;en&quot;: &quot;translations/Default_en.qm&quot;,</div>
<div class="line">    &quot;pl&quot;: &quot;translations/Default_pl.qm&quot;,</div>
<div class="line">    &quot;fr_CA&quot;: &quot;&quot;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md43"></a>
Translating a theme</h1>
<p>The qm file is a compiled Qt translation file. Those are used for translating strings in QML files, which is explained in the next section. Providing a qm file is optional, you can leave the value empty if your theme does not contain any translatable strings in QML files.</p>
<h2><a class="anchor" id="autotoc_md44"></a>
Strings in QML files</h2>
<p>To mark a string in a QML file as translatable, you need to wrap it in the <code>qsTr()</code> function. An in-depth explanation of how to use it can be found in the <a href="https://doc.qt.io/qt-6/i18n-source-translation.html#qml-use-qstr">Qt documentation</a>.</p>
<p>For translating strings in QML files, you will need to use the Qt Linguist toolchain. There are three essential tools:</p><ul>
<li><code>lupdate</code>: Extracts translatable strings from QML files and creates a <code>.ts</code> file.</li>
<li><code>Linguist</code>: A GUI tool for translators to translate the strings in a <code>.ts</code> file.</li>
<li><code>lrelease</code>: Compiles a <code>.ts</code> file into a <code>.qm</code> file that can be used by the game.</li>
</ul>
<p>This repository contains a CMake target called <code>update_translations</code> that will run <code>lupdate</code> for you for the default theme. Add your language to <code>qt_standard_project_setup</code> in <a href="CMakeLists.txt">CMakeLists.txt</a> to generate a <code>.ts</code> file for it. There is also a target called <code>release_translations</code> that will run <code>lrelease</code> (it also runs automatically when you build the game).</p>
<p>But if you're just a translator who doesn't want to build the game or you're developing your own theme, you can also run the tools manually in the command line. You can get them by <a href="https://www.qt.io/download-qt-installer-oss">installing Qt</a>.</p>
<p>Here is what it should look like inside Qt Linguist:</p>
<div class="image">
<img src="linguist.png" alt=""/>
<div class="caption">
Linguist</div></div>
     </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
